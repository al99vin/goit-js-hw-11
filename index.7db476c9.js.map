{"mappings":"AAEA,MAAMA,EAAO,CACXC,KAAMC,SAASC,cAAc,gBAC7BC,QAASF,SAASC,cAAc,YAChCE,SAAUH,SAASC,cAAc,eAGnCH,EAAKK,SAASC,MAAMC,QAAU,OAC9B,IAAIC,EAAe,EACfC,EAAO,EAgCXC,eAAeC,EAAYC,EAAMC,GAC/B,MAEMC,EAAU,CACdC,OAAQ,CACNC,IAAK,qCACLC,EAAGL,EACHM,WAAY,QACZC,YAAa,aACbC,WAAY,OACZC,KAAMR,EACNS,QAAS,KAIb,IACE,MAAMC,QAAiBC,MAAMC,IAfd,2BAe4BX,GAC3CN,GAAgBe,EAASG,KAAKC,KAAKC,OAkDvC,SAAiBA,EAAQC,EAAcP,EAASQ,GACzCF,GACHG,OAAOC,QACL,4EAGAJ,GAAUC,IACZ7B,EAAKK,SAASC,MAAMC,QAAU,OAC9BwB,OAAOE,KAAK,oBAAoBH,cAE9BD,GAAgBC,IAClB9B,EAAKK,SAASC,MAAMC,QAAU,OAC9BwB,OAAOE,KAAK,8D,CA5DZC,CACEX,EAASG,KAAKC,KAAKC,OACnBpB,EACAM,EAAQC,OAAOO,QACfC,EAASG,KAAKI,OAQpB,SAAuBK,GACrB,MAAMC,EAASD,EAAQR,KACpBU,KACCC,GAAO,kCAAkCA,EAAIC,oEAEnCD,EAAIE,sBAAsBF,EAAIG,+GAIpCH,EAAII,iFAIJJ,EAAIK,oFAIJL,EAAIM,wFAIJN,EAAIO,wDAMTC,KAAK,IACR9C,EAAKI,QAAQ2C,mBAAmB,YAAaX,GAC7CY,EAAeC,S,CAlCbC,CAAc3B,EAASG,K,CACvB,MAAOyB,GACPC,QAAQC,IAAIF,E,EA1DhBnD,EAAKC,KAAKqD,iBAAiB,UAc3B,SAAsBC,GACpBA,EAAEC,iBACFhD,EAAe,EACfR,EAAKI,QAAQqD,UAAY,GACzB,MAAM7C,EAAOZ,EAAKC,KAAKE,cAAc,SAASuD,MAAMC,OAEpD,GAAa,KAAT/C,EAIF,OADAZ,EAAKK,SAASC,MAAMC,QAAU,OACvBwB,OAAOC,QACZ,4EAJFrB,EAAYC,E,IAnBhBZ,EAAKK,SAASiD,iBAAiB,SAE/B,WACEtD,EAAKK,SAASC,MAAMC,QAAU,OAC9BE,GAAQ,EAERE,EADaX,EAAKC,KAAKE,cAAc,SAASuD,MAAMC,OAClClD,GAClBT,EAAKK,SAASC,MAAMC,QAAU,M,IAGhCP,EAAKC,KAAKE,cAAc,SAiFxB,MAAM6C,EAAiB,IAAIY,eAAe,aAAc,CACtDC,aAAc,MACdC,aAAc","sources":["src/index.js"],"sourcesContent":["\n\nconst refs = {\n  form: document.querySelector('#search-form'),\n  gallery: document.querySelector('.gallery'),\n  loadMore: document.querySelector('.load-more'),\n};\n\nrefs.loadMore.style.display = 'none';\nlet alreadyShown = 0;\nlet page = 1;\n\nrefs.form.addEventListener('submit', onFormSubmit);\n\nrefs.loadMore.addEventListener('click', onLoadMoreClick);\n\nfunction onLoadMoreClick() {\n  refs.loadMore.style.display = 'none';\n  page += 1;\n  const name = refs.form.querySelector('input').value.trim();\n  loadFromAPI(name, page);\n  refs.loadMore.style.display = 'flex';\n}\n\nrefs.form.querySelector('input');\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n  alreadyShown = 0;\n  refs.gallery.innerHTML = '';\n  const name = refs.form.querySelector('input').value.trim();\n\n  if (name !== '') {\n    loadFromAPI(name);\n  } else {\n    refs.loadMore.style.display = 'none';\n    return Notify.failure(\n      'Sorry, there are no images matching your search query. Please try again.'\n    );\n  }\n}\n\nasync function loadFromAPI(name, page) {\n  const BASE_URL = 'https://pixabay.com/api/';\n\n  const options = {\n    params: {\n      key: '31598622-f1e48b8e3d2e483874487f705',\n      q: name,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page: page,\n      perPage: 40,\n    },\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, options);\n    alreadyShown += response.data.hits.length;\n\n    message(\n      response.data.hits.length,\n      alreadyShown,\n      options.params.perPage,\n      response.data.total\n    );\n\n    renderGallery(response.data);\n  } catch (error) {\n    console.log(error);\n  }\n}\nfunction renderGallery(picture) {\n  const markup = picture.hits\n    .map(\n      hit => `<a class=\"gallery__link\" href=\"${hit.largeImageURL}\">\n        <div class=\"photo-card\">\n    <img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" loading=\"lazy\" />\n    <div class=\"info\">\n      <p class=\"info-item\">\n        <b>Likes</b>\n        ${hit.likes}\n      </p>\n      <p class=\"info-item\">\n        <b>Views</b>\n        ${hit.views}\n      </p>\n      <p class=\"info-item\">\n        <b>Comments</b>\n        ${hit.comments}\n      </p>\n      <p class=\"info-item\">\n        <b>Downloads</b>\n        ${hit.downloads}\n      </p>\n    </div>\n  </div>\n  </a>`\n    )\n    .join('');\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n  simpleLightBox.refresh();\n}\n\nconst simpleLightBox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nfunction message(length, alreadyShown, perPage, total) {\n  if (!length) {\n    Notify.failure(\n      'Sorry, there are no images matching your search query. Please try again.'\n    );\n  }\n  if (length >= alreadyShown) {\n    refs.loadMore.style.display = 'flex';\n    Notify.info(`Hooray! We found ${total} images.`);\n  }\n  if (alreadyShown >= total) {\n    refs.loadMore.style.display = 'none';\n    Notify.info(\"We're sorry, but you've reached the end of search results.\");\n  }\n}"],"names":["$1f0dc3b9307be026$var$refs","form","document","querySelector","gallery","loadMore","style","display","$1f0dc3b9307be026$var$alreadyShown","$1f0dc3b9307be026$var$page","async","$1f0dc3b9307be026$var$loadFromAPI","name","page1","options","params","key","q","image_type","orientation","safesearch","page","perPage","response","axios","get","data","hits","length","alreadyShown1","total","Notify","failure","info","$1f0dc3b9307be026$var$message","picture","markup","map","hit","largeImageURL","webformatURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","$1f0dc3b9307be026$var$simpleLightBox","refresh","$1f0dc3b9307be026$var$renderGallery","error","console","log","addEventListener","e","preventDefault","innerHTML","value","trim","SimpleLightbox","captionsData","captionDelay"],"version":3,"file":"index.7db476c9.js.map"}